"use strict";var table=$(".table");function render(e){for(var r in e)renderRow(e,r)}function renderRow(e,r){var t=$("<tr>",{class:"table__row"}),a={flightNum:e[r].thread.number,direction:e[r].departure,route:e[r].thread.title,company:e[r].thread.carrier.title,time:e[r].departure,delay:e[r].is_fuzzy};for(var i in table.append(t),a){var l=$("<td>",{class:"table__col"});switch(null!==e[r].departure?a.time=e[r].departure.split("T")[0]:null===a.direction?a.direction=e[r].arrival:null===a.time&&(a.time=e[r].arrival.split("T")[0]),a[i]===a.route&&l.addClass("table__col_font"),a[i]){case!0:l.addClass("table__col_color").text("Задержан");break;case!1:l.text("Ожидается в ".concat(a.direction));break;default:l.text(a[i])}a.direction=a.direction.split("T").pop().replace(/:\d+\+\d+:\d+/g,""),t.append(l)}}function renderDelay(e){for(var r in e)e[r].is_fuzzy&&renderRow(e,r)}
"use strict";function filterTable(t){var e=t.find(".table__col");t.find(".table__row").each(function(){var i=!0;$(this).find("td").each(function(t){e.eq(t).find("input").val()&&-1===$(this).html().toLowerCase().indexOf(e.eq(t).find("input").val().toLowerCase())&&(i=i&&!1)}),i?$(this).removeClass("table__row_display"):$(this).addClass("table__row_display")})}$(".table__input").on("input",function(){filterTable($(this).parents("table"))});
"use strict";var departure=$(".nav__btn_departure"),arrival=$(".nav__btn_arrival"),delay=$(".nav__btn_delayed"),clicked="nav__btn_color";function clearTable(){return $(".table__row").detach()}function btnClick(e,a,r){e.addClass(clicked),a.removeClass(clicked),r.removeClass(clicked)}departure.on("click",function(){btnClick(departure,arrival,delay),clearTable(),getJSON(request.event.dep)}),arrival.on("click",function(){btnClick(arrival,departure,delay),clearTable(),getJSON(request.event.arr)}),delay.on("click",function(){btnClick(delay,departure,arrival),clearTable(),getJSONDelay(request.event.dep),getJSONDelay(request.event.arr)}),getJSON(request.event.dep);